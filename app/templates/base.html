<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}SEC Filing Manager{% endblock %}</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        .sidebar {
            min-height: 100vh;
            background-color: #f8f9fa;
            border-right: 1px solid #dee2e6;
        }
        .nav-link.active {
            font-weight: bold;
            background-color: #e9ecef;
            border-radius: 0.375rem;
        }
        .nav-link:hover {
            background-color: #e9ecef;
            border-radius: 0.375rem;
        }
        .stat-card {
            transition: transform 0.2s;
        }
        .stat-card:hover {
            transform: translateY(-2px);
        }
        .table-hover tbody tr:hover {
            background-color: rgba(0,0,0,.02);
        }
    </style>
    {% block extra_css %}{% endblock %}
</head>
<body>
    <div class="container-fluid">
        <div class="row">
            <!-- Sidebar -->
            <nav class="col-md-2 d-md-block sidebar py-3">
                <h5 class="px-3 mb-4">SEC Filing Manager</h5>
                <ul class="nav flex-column px-2">
                    <li class="nav-item mb-1">
                        <a class="nav-link {% if request.url.path == '/' %}active{% endif %}" href="/">
                            Dashboard
                        </a>
                    </li>
                    <li class="nav-item mb-1">
                        <a class="nav-link {% if request.url.path == '/funds' %}active{% endif %}" href="/funds">
                            Funds
                        </a>
                    </li>
                    <li class="nav-item mb-1">
                        <a class="nav-link {% if request.url.path == '/documents' %}active{% endif %}" href="/documents">
                            Documents
                        </a>
                    </li>
                    <li class="nav-item mb-1">
                        <a class="nav-link {% if request.url.path == '/jobs' %}active{% endif %}" href="/jobs">
                            Job History
                        </a>
                    </li>
                    <li class="nav-item mb-1">
                        <a class="nav-link {% if request.url.path == '/settings' %}active{% endif %}" href="/settings">
                            Settings
                        </a>
                    </li>
                </ul>
                <hr class="mx-3">
                <div class="px-3">
                    <form action="/scan/trigger" method="post">
                        <button type="submit" class="btn btn-primary w-100" id="scanBtn">
                            Run Scan Now
                        </button>
                    </form>
                </div>
            </nav>

            <!-- Main content -->
            <main class="col-md-10 ms-sm-auto px-4 py-3">
                {% if error or request.query_params.get('error') %}
                <div class="alert alert-danger alert-dismissible fade show" role="alert">
                    {{ error or request.query_params.get('error') }}
                    <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
                </div>
                {% endif %}

                {% if success or request.query_params.get('success') %}
                <div class="alert alert-success alert-dismissible fade show" role="alert">
                    {{ success or request.query_params.get('success') }}
                    <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
                </div>
                {% endif %}

                {% if request.query_params.get('scan_started') %}
                <div class="alert alert-info alert-dismissible fade show" role="alert">
                    Document scan started. This may take a few minutes depending on the number of funds.
                    <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
                </div>
                {% endif %}

                {% block content %}{% endblock %}
            </main>
        </div>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    {% block scripts %}{% endblock %}
</body>
</html>
